<!DOCTYPE html>
<meta charset='utf-8'>
<title>Vibration API: cancel ongoing vibrate() when hidden by minimizing</title>
<link rel='author' title='Intel' href='http://www.intel.com'>
<link rel='help' href='http://dev.w3.org/2009/dap/vibration/#vibration-interface'>
<meta name='flags' content='interact'>
<meta name='assert' content='If the visibilitychange event is dispatched at the Document in a browsing context, cancel the pre-existing instance of the processing vibration patterns algorithm'>
<style>
  button {
    height: 100px;
    width:  100px;
  }
</style>

<h1>Description</h1>
<p>
  Ensure this page is the foreground.
  <ol>
    <li>Click the button "Vibrate!", your device must vibrate.</li>
    <li>Minimize the user agent, your device must stop vibrating.</li>
    <li>Restore or maximize the user agent, your device won't vibrate.</li>
  </ol>
</p>
<button id='vib'>Vibrate!</button>
<script src='../support/vendor-prefix.js' data-prefixed-objects='[{"ancestors":["navigator"], "name":"vibrate"}]'></script>
<script>
  if (undefined !== navigator.vibrate) {
    document.getElementById('vib').onclick = function () {
      navigator.vibrate(5000);
    };
  }
</script>

